---
import CardGrid from "@modules/common/CardGrid.astro";
import { findAlbumsByQuery } from "@server/albums";
import AlbumCard from "@modules/albums/AlbumCard/AlbumCard.astro";
import EmptyPlaceholder from "@modules/common/EmptyPlaceholder.astro";

export type Props = {
  query: string;
};

const { query } = Astro.props;
const data = await findAlbumsByQuery({ query, skip: 0, take: 20 });
---

<CardGrid>
  {data.map((entry) => <AlbumCard album={entry.Album} artist={entry.Artist} />)}
</CardGrid>
{data.length === 0 && <EmptyPlaceholder />}
