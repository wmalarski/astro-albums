---
import { findAlbumsByQuery } from "@server/albums";
import { AlbumCard } from "@modules/albums/AlbumCard/AlbumCard";
import EmptyPlaceholder from "@modules/common/EmptyPlaceholder.astro";
import { InfiniteAlbumResults } from "./InfiniteAlbumResults";

export type Props = {
  query: string;
};

const { query } = Astro.props;
const data = await findAlbumsByQuery({ query, skip: 0, take: 20 });
---

<InfiniteAlbumResults client:load query={query}>
  {
    data.map((entry) => (
      <AlbumCard client:load album={entry.Album} artist={entry.Artist} />
    ))
  }
</InfiniteAlbumResults>
{data.length === 0 && <EmptyPlaceholder />}
