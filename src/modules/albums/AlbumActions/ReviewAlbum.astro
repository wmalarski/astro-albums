---
import { formatAlbum } from "@utils/format";
import type { Album, Artist } from "astro:db";
import {
  DialogTrigger,
  DialogContainer,
  DialogContent,
  DialogActions,
  DialogClose,
} from "@components/Dialog/Dialog";
import ReviewForm from "@modules/reviews/ReviewForm/ReviewFields.astro";
import Button from "@components/Button/Button.astro";

export interface Props {
  album: typeof Album.$inferSelect;
  artist: typeof Artist.$inferSelect;
}

const { album, artist } = Astro.props;
const dialogId = `dialog-review-album-${album.id}`;
const formId = `form-review-album-${album.id}`;
---

<DialogTrigger dialogId={dialogId} client:load>Review</DialogTrigger>
<DialogContainer id={dialogId}>
  <DialogContent>
    <h3 class="font-bold text-lg">
      {`Review ${formatAlbum({ album, artist })}`}
    </h3>
    <ReviewForm />
    <DialogActions>
      <DialogClose>Close</DialogClose>
      <Button form={formId} type="submit">Submit</Button>
    </DialogActions>
  </DialogContent>
</DialogContainer>
