---
import { findRandomAlbums } from "@server/albums";
import { AlbumCard } from "@modules/albums/AlbumCard/AlbumCard";
import EmptyPlaceholder from "@modules/common/EmptyPlaceholder.astro";
import { InfiniteRandomAlbums } from "./InfiniteRandomAlbums";

export type Props = {
  userId: string;
};

const { userId } = Astro.props;

const data = await findRandomAlbums({ userId, take: 20 });
---

<InfiniteRandomAlbums>
  {
    data.map((entry) => (
      <AlbumCard client:load album={entry.Album} artist={entry.Artist} />
    ))
  }
</InfiniteRandomAlbums>
{data.length === 0 && <EmptyPlaceholder />}
